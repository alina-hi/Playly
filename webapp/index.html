<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playly - –î–µ—Ç—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .navbar {
            background-color: #4CAF50;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        .hero {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .cta-button {
            display: inline-block;
            background-color: white;
            color: #4CAF50;
            padding: 12px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h3 {
            color: #4CAF50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .api-test {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin: 3rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .api-test h2 {
            color: #333;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 0.5rem;
        }

        .test-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .test-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        .test-button:hover {
            background-color: #45a049;
        }

        .test-button.secondary {
            background-color: #6c757d;
        }

        .test-button.secondary:hover {
            background-color: #5a6268;
        }

        #apiResult {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
            display: none;
        }

        .result-success {
            border-left-color: #28a745 !important;
        }

        .result-error {
            border-left-color: #dc3545 !important;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .auth-status {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .auth-status h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        .footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .container {
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body>
<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav class="navbar">
    <div class="nav-container">
        <a href="index.html" class="logo">Playly</a>
        <div class="nav-links">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="register.html">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            <a href="login.html">–í—Ö–æ–¥</a>
            <a href="#" id="profileLink" style="display:none;">–ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="#" id="logoutLink" style="display:none;">–í—ã–π—Ç–∏</a>
        </div>
    </div>
</nav>

<!-- –ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä -->
<section class="hero">
    <div class="hero-content">
        <h1>–ù–∞–π–¥–∏—Ç–µ –ª—É—á—à–∏–µ –¥–µ—Ç—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏</h1>
        <p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ, –æ—Ü–µ–Ω–∏–≤–∞–π—Ç–µ –∏ –¥–µ–ª–∏—Ç–µ—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–µ—Ç—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ</p>
        <a href="register.html" class="cta-button">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É</a>
    </div>
</section>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<div class="container">
    <!-- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-status">
        <h3>–°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h3>
        <p id="authStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</p>
    </div>

    <!-- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ -->
    <section class="features">
        <div class="feature-card">
            <h3>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π</h3>
            <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
        <div class="feature-card">
            <h3>‚≠ê –û—Ü–µ–Ω–∫–∞ –ø–ª–æ—â–∞–¥–æ–∫</h3>
            <p>–û—Å—Ç–∞–≤–ª—è–π—Ç–µ –æ—Ç–∑—ã–≤—ã –∏ –æ—Ü–µ–Ω–∫–∏ –¥–µ—Ç—Å–∫–∏–º –ø–ª–æ—â–∞–¥–∫–∞–º</p>
        </div>
        <div class="feature-card">
            <h3>üë• –°–æ–æ–±—â–µ—Å—Ç–≤–æ</h3>
            <p>–û–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏, –¥–µ–ª–∏—Ç–µ—Å—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏</p>
        </div>
    </section>

    <!-- –¢–µ—Å—Ç API (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
    <section class="api-test">
        <h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API</h2>
        <div class="test-buttons">
            <button class="test-button" onclick="testGetPlaygrounds()">–ü–æ–ª—É—á–∏—Ç—å –ø–ª–æ—â–∞–¥–∫–∏</button>
            <button class="test-button" onclick="testUserAPI()">–¢–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
            <button class="test-button secondary" onclick="clearResult()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        <div id="apiResult"></div>
    </section>
</div>

<!-- –§—É—Ç–µ—Ä -->
<footer class="footer">
    <p>¬© 2024 Playly - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π</p>
    <p>–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</p>
</footer>

<script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
        checkAuthStatus();
    });

    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    async function checkAuthStatus() {
        try {
            const response = await fetch('/playly/api/login', {
                method: 'GET'
            });

            const result = await response.json();
            const authStatus = document.getElementById('authStatus');
            const profileLink = document.getElementById('profileLink');
            const logoutLink = document.getElementById('logoutLink');

            if (result.success && result.authenticated) {
                authStatus.innerHTML = `‚úÖ –í—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ <strong>${result.user.username}</strong>`;
                profileLink.style.display = 'inline';
                logoutLink.style.display = 'inline';

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Å—Å—ã–ª–æ–∫
                profileLink.onclick = function() {
                    alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
                    return false;
                };

                logoutLink.onclick = async function(e) {
                    e.preventDefault();
                    await logout();
                    return false;
                };
            } else {
                authStatus.innerHTML = '‚ùå –í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã';
                profileLink.style.display = 'none';
                logoutLink.style.display = 'none';
            }
        } catch (error) {
            console.error('Auth check error:', error);
            document.getElementById('authStatus').innerHTML = '‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏';
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞
    async function logout() {
        try {
            const response = await fetch('/playly/api/logout', {
                method: 'POST'
            });

            const result = await response.json();
            if (result.success) {
                alert('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
                location.reload();
            }
        } catch (error) {
            console.error('Logout error:', error);
        }
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
    async function testGetPlaygrounds() {
        try {
            showResult('‚è≥ –ó–∞–ø—Ä–∞—à–∏–≤–∞—é –¥–∞–Ω–Ω—ã–µ –æ –ø–ª–æ—â–∞–¥–∫–∞—Ö...', 'info');

            const response = await fetch('/playly/api/playgrounds');
            const data = await response.json();

            if (response.ok) {
                showResult(`‚úÖ –£—Å–ø–µ—à–Ω–æ! –ü–æ–ª—É—á–µ–Ω–æ –ø–ª–æ—â–∞–¥–æ–∫: ${data.length}\n\n${JSON.stringify(data, null, 2)}`, 'success');
            } else {
                showResult(`‚ùå –û—à–∏–±–∫–∞ ${response.status}: ${JSON.stringify(data, null, 2)}`, 'error');
            }
        } catch (error) {
            showResult(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`, 'error');
        }
    }

    async function testUserAPI() {
        try {
            showResult('‚è≥ –¢–µ—Å—Ç–∏—Ä—É—é API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...', 'info');

            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
            const testData = {
                email: `test${Date.now()}@example.com`,
                username: `testuser${Date.now()}`,
                password: 'test123'
            };

            showResult(`–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:\n${JSON.stringify(testData, null, 2)}`, 'info');

        } catch (error) {
            showResult(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
        }
    }

    function showResult(message, type) {
        const resultDiv = document.getElementById('apiResult');
        resultDiv.innerHTML = `<pre>${message}</pre>`;
        resultDiv.style.display = 'block';
        resultDiv.className = '';

        if (type === 'success') {
            resultDiv.classList.add('result-success');
        } else if (type === 'error') {
            resultDiv.classList.add('result-error');
        }
    }

    function clearResult() {
        document.getElementById('apiResult').style.display = 'none';
    }
</script>
</body>
</html>